class Solution {
public:
    bool isValid(string s) {
        int Len=s.length();
        long sum=0;
        if(Len%2){return false;}//must be pairs
        for(int l=0;l<Len;l++)
        {
            if(s.compare(l,1,"(")==0)//==err ISO C++ forbids comparison between pointer and integer [-fpermissive]
            {
                sum=sum*4+1;
            }
            else if(s.compare(l,1,"[")==0)
            {
                sum=sum*4+2;                
            }
            else if(s.compare(l,1,"{")==0)
            {
                sum=sum*4+3;                
            }
            else if(s.compare(l,1,")")==0)
            {
                if(sum%4!=1)return false;
                sum=sum/4;
            }
            else if(s.compare(l,1,"]")==0)
            {
                if(sum%4!=2)return false;
                sum=sum/4;
            }
            else if(s.compare(l,1,"}")==0)
            {
                if(sum%4!=3)return false;
                sum=sum/4;
            }
        }
        if(sum!=0)return false;
        return true;
    }
};